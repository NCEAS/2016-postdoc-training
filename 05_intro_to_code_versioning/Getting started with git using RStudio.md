## Enabling git Version Control through RStudio 

*Note:* This is assumed that you already have use git on this computer/server. If not, you need to first [setup your identity](https://git-scm.com/book/en/v2/Getting-Started-First-Time-Git-Setup).

**If you want to use RStudio interface to control git, you need to create a Rstudio Project**. To do so, you need first to organize your files in one folder, that will become your git repository. Once this is done, you can create a new Rstudio Project from the upper-right corner of the RStudio IDE window, choosing *New Project* :

![image alt text](images/image_0.png)

Now, you could have two situations:

* *Create the Project based on an existing folder* (e.g. you already have being working and writing code and you want to start using git versioning on this work)

* *Create the Project from scratch** based on a new empty folder

# Versioning existing work

### Create the RStudio Project

* Choose *Existing Directory* from the wizard![image alt text](images/image_1.png)

* *Browse* to the main folder containing your data

* *Create Project*

### Starting git version control 

Now you that have successfully created an RStudio project, you can enable the code versioning. Got to the *Tools* menu -> *Version Control *-> *Project Setup… *

![image alt text](images/image_2.png)

This will open a new window. Change the *None* setting by choosing *Git* from the dropdown menu

![image alt text](images/image_3.png)

Click *OK*. Answer *Yes* to the 2 following pop-ups to restart RStudio and enable git on your project.

# Versioning new work

* Create a new Rstudio Project from the upper-right corner of the RStudio IDE window, choosing *New Project* 

* Choose *New Directory* ![image alt text](images/image_4.png)Note: The Version control option at the bottom is only to be chosen when you want to clone an existing repository.

* Choose *Empty* *Project*![image alt text](images/image_5.png)

* Give your project (folder) a *name*, *Browse* for its location on your drive. Finally, check the option *Create a git repository *before clicking *Create Project*.**![image alt text](images/image_6.png)

Congratulations, you have a new project with git versioning enabled!!

# Using git from RStudio

Now that you have enabled git versioning for your Project, a *Git* tab should have been added to your interface next to *Environment* and *History *tabs

![image alt text](images/image_7.png)

Note that the *.gitignore *file is automatically generated by RStudio. It lists all file formats we do not want to track, here specifically the temporary files from R and Rstudio. You can edit this document to add any type of file you would like not git to track.

### Staging

To which files you want to track (aka staging), you need to check the boxes in front of the file names

![image alt text](images/image_8.png)

### Committing

Then you can do your first commit -taking a snapshot of the current status of your work for the files you have decided to track (stage)-  by clicking on the *Commit* button (above your file names)

A new window should pop-up. Note that certain web browsers will block this pop-up.

![image alt text](images/image_9.png)

You need to write a descriptive message of the work accomplished from the last commit in the Commit message window, then you can click the Commit button (below the Commit message window).

Then you can hit the button *Close* and close the commit window as you would close any system windows.

All the committed files should have disappeared from the *Git* tab on the RStudio IDE. A file will reappear when you save new changes. 

And you can start the whole commit process again, once you have reached a milestone in your work!! Commit frequently!!

We will talk about pushing and pulling to a remote machine/server another time.

# NCEAS GitHub Instance

URL: [https://github.nceas.ucsb.edu](https://github.nceas.ucsb.edu/)

LOGIN: the instance uses NCEAS LDAP authentication (same as redmine, …). If you do not have an NCEAS account you can create one [here](https://identity.nceas.ucsb.edu/identity/cgi-bin/ldapweb.cgi?cfg=account).

## Creating a new repo

* On NCEAS github website ([https://github.nceas.ucsb.edu](https://github.nceas.ucsb.edu/)):

    * Create a repo with the same name as your local repo/folder

        * Click on ![image alt text](images/image_10.png)

        * Choose the owner of your repo. We recommend to choose your institution as it is easier to manage user access through teams

        * Enter the descriptive name for your new repo

        * Check **"Initialize this repository with a README”** a descriptive readme file and choose the adequate

        * Add a .gitignore file (optional)

## Adding an existing local repo to your NCEAS instance

* On NCEAS github website ([https://github.nceas.ucsb.edu](https://github.nceas.ucsb.edu/)):

    * Same as "Creating a new repo", except

    * Do **not** create a readme file or .gitignore file

* On your local terminal:

    * Go inside your local repo with the terminal/shell

    * Add the remote: git remote add origin *URL to your repo*

    * Do the first push: git push -u origin master

    * Enter your NCEAS username and password

## Adding a team to a repository

* Click on the repository

* On the right panel, click ![image alt text](images/image_11.png)

* On the left pane, click Collaborators & teams ![image alt text](images/image_12.png)

* Select your team ![image alt text](images/image_13.png)

* Select the appropriate Permission level ![image alt text](images/image_14.png)We recommend Admin or Write

# References

Check out [NCEAS’ help wiki](https://help.nceas.ucsb.edu/git) for tutorials on git

